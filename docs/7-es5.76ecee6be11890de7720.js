!function(){function t(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],i=!0,n=!1,a=void 0;try{for(var c,o=t[Symbol.iterator]();!(i=(c=o.next()).done)&&(r.push(c.value),!e||r.length!==e);i=!0);}catch(u){n=!0,a=u}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return r}(t,r)||function(t,r){if(!t)return;if("string"==typeof t)return e(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return e(t,r)}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{CRCv:function(e,i,a){"use strict";a.r(i),a.d(i,"EditorModule",function(){return W});var c,o,u=a("gy9y"),s=a("AxuA"),l=a("ofXK"),f=a("tyNb"),b=a("9jGm"),d=a("l7P3"),p=a("LRne"),h=a("zp1y"),v=a("bOdf"),y=a("lJxs"),m=a("JIr8"),g=a("A47K"),O=a("fXoL"),j=((c=function(){function t(e){r(this,t),this.apiService=e}return n(t,[{key:"publishArticle",value:function(t){return t.slug?this.apiService.put("/articles/"+t.slug,{article:t}):this.apiService.post("/articles/",{article:t})}},{key:"get",value:function(t){return this.apiService.get("/articles/"+t)}}]),t}()).\u0275fac=function(t){return new(t||c)(O.Qb(g.b))},c.\u0275prov=O.Eb({token:c,factory:c.\u0275fac}),c),A=Object(d.n)("[editor] PUBLISH_ARTICLE"),F=Object(d.n)("[editor] INITIALIZE_ARTICLE"),k=Object(d.n)("[editor] LOAD_ARTICLE",Object(d.s)()),w=Object(d.n)("[editor] LOAD_ARTICLE_SUCCESS",Object(d.s)()),I=Object(d.n)("[editor] LOAD_ARTICLE_FAIL",Object(d.s)()),S=a("EdWO"),L=((o=function e(i,n,a){var c=this;r(this,e),this.actions$=i,this.ngrxFormsFacade=n,this.editorService=a,this.publishArticle$=Object(b.c)(function(){return c.actions$.pipe(Object(b.d)(A),Object(h.a)(c.ngrxFormsFacade.data$),Object(v.a)(function(e){var r=t(e,2),i=(r[0],r[1]);return c.editorService.publishArticle(i).pipe(Object(y.a)(function(t){return Object(S.b)({to:{path:["article",t.article.slug]}})}),Object(m.a)(function(t){return Object(p.a)(Object(s.d)({errors:t.error.errors}))}))}))}),this.loadArticle$=Object(b.c)(function(){return c.actions$.pipe(Object(b.d)(k),Object(v.a)(function(t){return c.editorService.get(t.id).pipe(Object(y.a)(function(t){return w({article:t.article})}),Object(m.a)(function(t){return Object(p.a)(I(t))}))}))})}).\u0275fac=function(t){return new(t||o)(O.Qb(b.a),O.Qb(s.a),O.Qb(j))},o.\u0275prov=O.Eb({token:o,factory:o.\u0275fac}),o),E={article:{slug:"",title:"",description:"",body:"",tagList:[],createdAt:"",updatedAt:"",favorited:!1,favoritesCount:0,author:{username:"",bio:"",image:"",following:!1,loading:!1}}},$=Object(d.p)(E,Object(d.r)(w,function(t,e){return Object.assign(Object.assign({},t),{article:e.article})}),Object(d.r)(I,F,function(){return E}));function T(t,e){return $(t,e)}var x,C,R,M,P=Object(d.o)("editor"),D={getArticle:Object(d.q)(P,function(t){return t.article})},_=((x=function(){function t(e){r(this,t),this.store=e,this.article$=this.store.select(D.getArticle)}return n(t,[{key:"loadArticle",value:function(t){this.store.dispatch(k({id:t}))}},{key:"loadArticleSuccess",value:function(t){this.store.dispatch(w({article:t}))}},{key:"loadArticleFail",value:function(t){this.store.dispatch(I({error:t}))}},{key:"publishArticle",value:function(){this.store.dispatch(A())}},{key:"initializeArticle",value:function(){this.store.dispatch(F())}}]),t}()).\u0275fac=function(t){return new(t||x)(O.Qb(d.h))},x.\u0275prov=O.Eb({token:x,factory:x.\u0275fac}),x),Q=a("3Pt+"),U=a("T7Fx"),J=a("5W4/"),N=[{type:"INPUT",name:"title",placeholder:"Article Title",validator:[Q.h.required]},{type:"INPUT",name:"description",placeholder:"What's this article about?",validator:[Q.h.required]},{type:"TEXTAREA",name:"body",placeholder:"Write your article (in markdown)",validator:[Q.h.required]},{type:"INPUT",name:"tagList",placeholder:"Enter Tags",validator:[]}],q=((M=function(){function t(e,i,n){r(this,t),this.ngrxFormsFacade=e,this.router=i,this.facade=n}return n(t,[{key:"ngOnInit",value:function(){var t=this;this.ngrxFormsFacade.setStructure(N),this.data$=this.ngrxFormsFacade.data$,this.structure$=this.ngrxFormsFacade.structure$,this.facade.article$.subscribe(function(e){return t.ngrxFormsFacade.setData(e)})}},{key:"updateForm",value:function(t){this.ngrxFormsFacade.updateData(t)}},{key:"submit",value:function(){this.facade.publishArticle()}},{key:"ngOnDestroy",value:function(){this.ngrxFormsFacade.initializeForm(),this.facade.initializeArticle()}}]),t}()).\u0275fac=function(t){return new(t||M)(O.Ib(s.a),O.Ib(f.e),O.Ib(_))},M.\u0275cmp=O.Cb({type:M,selectors:[["app-article-editor"]],decls:8,vars:2,consts:[[1,"editor-page"],[1,"container","page"],[1,"row"],[1,"col-md-10","offset-md-1","col-xs-12"],[3,"data$","structure$","updateForm"],["type","button",1,"btn","btn-lg","pull-xs-right","btn-primary",3,"click"]],template:function(t,e){1&t&&(O.Mb(0,"div",0),O.Mb(1,"div",1),O.Mb(2,"div",2),O.Mb(3,"div",3),O.Jb(4,"app-list-errors"),O.Mb(5,"app-dynamic-form",4),O.Tb("updateForm",function(t){return e.updateForm(t)}),O.Lb(),O.Mb(6,"button",5),O.Tb("click",function(){return e.submit()}),O.jc(7," Publish Article "),O.Lb(),O.Lb(),O.Lb(),O.Lb(),O.Lb()),2&t&&(O.yb(5),O.Zb("data$",e.data$)("structure$",e.structure$))},directives:[U.a,J.a],styles:[""],changeDetection:0}),M),z=((R=function(){function t(e){r(this,t),this.facade=e}return n(t,[{key:"resolve",value:function(t,e){var r=t.params.slug;return r&&this.facade.loadArticle(r),Object(p.a)(!0)}}]),t}()).\u0275fac=function(t){return new(t||R)(O.Qb(_))},R.\u0275prov=O.Eb({token:R,factory:R.\u0275fac}),R),W=((C=function t(){r(this,t)}).\u0275mod=O.Gb({type:C}),C.\u0275inj=O.Fb({factory:function(t){return new(t||C)},providers:[L,j,z,_],imports:[[l.c,s.b,f.h.forChild([{path:"",pathMatch:"full",component:q,resolve:{EditorResolverService:z},canActivate:[u.b]},{path:":slug",component:q,resolve:{EditorResolverService:z}}]),d.j.forFeature("editor",T,{initialState:E}),b.b.forFeature([L])]]}),C)}}])}();
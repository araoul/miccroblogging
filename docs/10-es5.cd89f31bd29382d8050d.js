!function(){function t(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(c){a=!0,i=c}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return r}(t,r)||function(t,r){if(!t)return;if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,r)}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{l14b:function(e,n,i){"use strict";i.r(n),i.d(n,"SettingsModule",function(){return E});var o,u,c,s,b=i("gy9y"),l=i("AxuA"),d=i("A47K"),f=i("fXoL"),p=((o=function(){function t(e){r(this,t),this.apiService=e}return a(t,[{key:"update",value:function(t){return this.apiService.put("/user",{user:t})}}]),t}()).\u0275fac=function(t){return new(t||o)(f.Qb(d.b))},o.\u0275prov=f.Eb({token:o,factory:o.\u0275fac}),o),h=i("ofXK"),m=i("tyNb"),y=i("9jGm"),g=i("LRne"),v=i("zp1y"),F=i("lJxs"),j=i("bOdf"),O=i("5+tZ"),w=i("JIr8"),x=i("l7P3"),S=Object(x.n)("[settings] EDIT_SETTINGS"),$=i("EdWO"),k=((u=function e(n,a,i,o){var u=this;r(this,e),this.actions$=n,this.settingsService=a,this.authFacade=i,this.ngrxFormsFacade=o,this.editSettings=Object(y.c)(function(){return u.actions$.pipe(Object(y.d)(S),Object(v.a)(u.ngrxFormsFacade.data$,u.authFacade.user$),Object(F.a)(function(e){var r=t(e,3),n=(r[0],r[1]),a=r[2];return Object.assign(Object.assign({},a),{image:n.image,username:n.username,bio:n.bio,pass:n.pass,email:n.email})}),Object(j.a)(function(t){return u.settingsService.update(t).pipe(Object(O.a)(function(t){return[Object(b.e)(),Object($.b)({to:{path:["profile",t.user.username]}})]}),Object(w.a)(function(t){return Object(g.a)(Object(l.d)({errors:t.error.errors}))}))}))})}).\u0275fac=function(t){return new(t||u)(f.Qb(y.a),f.Qb(p),f.Qb(b.a),f.Qb(l.a))},u.\u0275prov=f.Eb({token:u,factory:u.\u0275fac}),u),I=i("3Pt+"),T=i("T7Fx"),M=i("5W4/"),A=[{type:"INPUT",name:"image",placeholder:"URL of profile picture",validator:[]},{type:"INPUT",name:"username",placeholder:"Your Name",validator:[I.h.required]},{type:"TEXTAREA",name:"bio",placeholder:"Short bio about you",validator:[]},{type:"INPUT",name:"email",placeholder:"Email",validator:[I.h.required]},{type:"INPUT",name:"password",placeholder:"New Password",validator:[I.h.required],attrs:{type:"password"}}],L=((s=function(){function t(e,n,a,i){r(this,t),this.store=e,this.router=n,this.authFacade=a,this.ngrxFormsFacade=i}return a(t,[{key:"ngOnInit",value:function(){var t=this;this.ngrxFormsFacade.setStructure(A),this.authFacade.user$.subscribe(function(e){return t.ngrxFormsFacade.setData(e)}),this.data$=this.ngrxFormsFacade.data$,this.structure$=this.ngrxFormsFacade.structure$}},{key:"updateForm",value:function(t){this.ngrxFormsFacade.updateData(t)}},{key:"submit",value:function(){this.store.dispatch(S())}},{key:"logout",value:function(){this.authFacade.logout()}}]),t}()).\u0275fac=function(t){return new(t||s)(f.Ib(x.h),f.Ib(m.e),f.Ib(b.a),f.Ib(l.a))},s.\u0275cmp=f.Cb({type:s,selectors:[["app-settings"]],decls:14,vars:2,consts:[[1,"settings-page"],[1,"container","page"],[1,"row"],[1,"col-md-6","offset-md-3","col-xs-12"],[1,"text-xs-center"],[3,"data$","structure$","updateForm"],[1,"edit-button-container"],["type","submit",1,"btn","btn-lg","btn-primary","pull-xs-right",3,"click"],[1,"btn","btn-outline-danger",3,"click"]],template:function(t,e){1&t&&(f.Mb(0,"div",0),f.Mb(1,"div",1),f.Mb(2,"div",2),f.Mb(3,"div",3),f.Mb(4,"h1",4),f.jc(5,"Your Settings"),f.Lb(),f.Jb(6,"app-list-errors"),f.Mb(7,"app-dynamic-form",5),f.Tb("updateForm",function(t){return e.updateForm(t)}),f.Lb(),f.Mb(8,"div",6),f.Mb(9,"button",7),f.Tb("click",function(){return e.submit()}),f.jc(10," Update Settings "),f.Lb(),f.Lb(),f.Jb(11,"hr"),f.Mb(12,"button",8),f.Tb("click",function(){return e.logout()}),f.jc(13," Or click here to logout. "),f.Lb(),f.Lb(),f.Lb(),f.Lb(),f.Lb()),2&t&&(f.yb(7),f.Zb("data$",e.data$)("structure$",e.structure$))},directives:[T.a,M.a],styles:[".edit-button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"],changeDetection:0}),s),E=((c=function t(){r(this,t)}).\u0275mod=f.Gb({type:c}),c.\u0275inj=f.Fb({factory:function(t){return new(t||c)},providers:[k,p],imports:[[h.c,l.b,m.h.forChild([{path:"",pathMatch:"full",component:L,canActivate:[b.b]}]),y.b.forFeature([k])]]}),c)}}])}();
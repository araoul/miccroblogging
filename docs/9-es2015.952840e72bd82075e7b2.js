(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{o0Gc:function(e,t,i){"use strict";i.r(t),i.d(t,"ProfileModule",function(){return B});var r=i("CWEr"),n=i("gy9y"),c=i("2Mw2"),s=i("ofXK"),o=i("tyNb"),b=i("9jGm"),a=i("l7P3"),l=i("A47K"),f=i("lJxs"),u=i("fXoL");let p=(()=>{class e{constructor(e){this.apiService=e}getProfile(e){return this.apiService.get("/profiles/"+e).pipe(Object(f.a)(e=>e.profile))}}return e.\u0275fac=function(t){return new(t||e)(u.Qb(l.b))},e.\u0275prov=u.Eb({token:e,factory:e.\u0275fac}),e})();var O=i("LRne"),h=i("OQgR"),j=i("5+tZ"),d=i("eIep"),g=i("JIr8"),v=i("bOdf");const L=Object(a.n)("[profile] GET_PROFILE",Object(a.s)()),y=Object(a.n)("[profile] GET_PROFILE_SUCCESS",Object(a.s)()),m=Object(a.n)("[profile] GET_PROFILE_FAIL",Object(a.s)()),w=Object(a.n)("[profile] FOLLOW",Object(a.s)()),$=Object(a.n)("[profile] FOLLOW_SUCCESS",Object(a.s)()),k=Object(a.n)("[profile] FOLLOW_FAIL",Object(a.s)()),F=Object(a.n)("[profile] UNFOLLOW",Object(a.s)()),M=Object(a.n)("[profile] UNFOLLOW_SUCCESS",Object(a.s)()),S=Object(a.n)("[profile] UNFOLLOW_FAIL",Object(a.s)());let W=(()=>{class e{constructor(e,t,i){this.actions$=e,this.actionsService=t,this.profileService=i,this.getProfile$=Object(b.c)(()=>this.actions$.pipe(Object(b.d)(L),Object(h.a)(e=>e.id),Object(j.a)(e=>e.pipe(Object(f.a)(e=>e.id),Object(d.a)(e=>this.profileService.getProfile(e).pipe(Object(f.a)(e=>y({profile:e})),Object(g.a)(e=>Object(O.a)(m({error:e}))))))))),this.follow$=Object(b.c)(()=>this.actions$.pipe(Object(b.d)(w),Object(f.a)(e=>e.id),Object(v.a)(e=>this.actionsService.followUser(e).pipe(Object(f.a)(e=>$({profile:e.profile})),Object(g.a)(e=>Object(O.a)(k({error:e}))))))),this.unFollow$=Object(b.c)(()=>this.actions$.pipe(Object(b.d)(F),Object(f.a)(e=>e.id),Object(v.a)(e=>this.actionsService.unfollowUser(e).pipe(Object(f.a)(e=>M({profile:e.profile})),Object(g.a)(e=>Object(O.a)(S({error:e})))))))}}return e.\u0275fac=function(t){return new(t||e)(u.Qb(b.a),u.Qb(c.a),u.Qb(p))},e.\u0275prov=u.Eb({token:e,factory:e.\u0275fac}),e})();const E={username:"",bio:"",image:"",following:!1,loading:!1},C=Object(a.o)("profile"),X=Object(a.p)(E,Object(a.r)(L,(e,t)=>Object.assign(Object.assign({},e),{loading:!0})),Object(a.r)(y,(e,t)=>Object.assign(Object.assign({},t.profile),{loading:!1})),Object(a.r)(m,(e,t)=>E),Object(a.r)($,M,(e,t)=>t.profile));function U(e,t){return X(e,t)}let A=(()=>{class e{constructor(e){this.store=e,this.profile$=this.store.select(C)}follow(e){this.store.dispatch(w({id:e}))}unfollow(e){this.store.dispatch(F({id:e}))}}return e.\u0275fac=function(t){return new(t||e)(u.Qb(a.h))},e.\u0275prov=u.Eb({token:e,factory:e.\u0275fac}),e})();var I=i("qm0p");let P=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Cb({type:e,selectors:[["app-profile-articles"]],decls:1,vars:0,template:function(e,t){1&e&&u.Jb(0,"app-article-list")},directives:[I.a],styles:[""],changeDetection:0}),e})(),J=(()=>{class e{constructor(e){this.store=e}resolve(e,t){this.store.dispatch(L({id:e.params.username}))}}return e.\u0275fac=function(t){return new(t||e)(u.Qb(a.h))},e.\u0275prov=u.Eb({token:e,factory:e.\u0275fac}),e})(),Q=(()=>{class e{constructor(e){this.store=e}resolve(e,t){const i=e.params.username;this.store.dispatch(r.d({config:Object.assign(Object.assign({},r.c.listConfig),{filters:Object.assign(Object.assign({},r.c.listConfig.filters),{author:i})})}))}}return e.\u0275fac=function(t){return new(t||e)(u.Qb(a.h))},e.\u0275prov=u.Eb({token:e,factory:e.\u0275fac}),e})(),_=(()=>{class e{constructor(e){this.store=e}resolve(e,t){const i=e.parent.params.username;this.store.dispatch(r.d({config:Object.assign(Object.assign({},r.c.listConfig),{filters:Object.assign(Object.assign({},r.c.listConfig.filters),{favorited:i})})}))}}return e.\u0275fac=function(t){return new(t||e)(u.Qb(a.h))},e.\u0275prov=u.Eb({token:e,factory:e.\u0275fac}),e})();var G=i("XNiG"),R=i("itXk"),Z=i("vkgz"),x=i("1G5W");const N=function(e,t){return{"btn-outline-secondary":e,"btn-secondary":t}},T=function(){return["/settings"]},D=function(e){return["/profile",e]},K=function(){return{exact:!0}},q=function(e){return["/profile",e,"favorites"]};let z=(()=>{class e{constructor(e,t){this.facade=e,this.authFacade=t,this.isUser$=new G.a,this.unsubscribe$=new G.a}ngOnInit(){this.profile$=this.facade.profile$,this.currentUser$=this.authFacade.user$,Object(R.b)([this.profile$,this.currentUser$]).pipe(Object(Z.a)(([e,t])=>{this.username=e.username,this.following=e.following}),Object(f.a)(([e,t])=>e.username===t.username),Object(x.a)(this.unsubscribe$)).subscribe(e=>this.isUser$.next(e))}toggleFollowing(){this.following?this.facade.unfollow(this.username):this.facade.follow(this.username)}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}}return e.\u0275fac=function(t){return new(t||e)(u.Ib(A),u.Ib(n.a))},e.\u0275cmp=u.Cb({type:e,selectors:[["app-profile"]],decls:40,vars:48,consts:[[1,"profile-page"],[1,"user-info"],[1,"container"],[1,"row"],[1,"col-xs-12","col-md-10","offset-md-1"],[1,"user-img",3,"src"],[3,"hidden"],[1,"btn","btn-sm","action-btn",3,"hidden","ngClass","click"],[1,"ion-plus-round"],[1,"btn","btn-sm","btn-outline-secondary","action-btn",3,"routerLink","hidden"],[1,"ion-gear-a"],[1,"articles-toggle"],[1,"nav","nav-pills","outline-active"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink","routerLinkActiveOptions"]],template:function(e,t){if(1&e&&(u.Mb(0,"div",0),u.Mb(1,"div",1),u.Mb(2,"div",2),u.Mb(3,"div",3),u.Mb(4,"div",4),u.Jb(5,"img",5),u.Wb(6,"async"),u.Mb(7,"h4",6),u.Wb(8,"async"),u.jc(9),u.Wb(10,"async"),u.Lb(),u.Mb(11,"p"),u.jc(12),u.Wb(13,"async"),u.Lb(),u.Mb(14,"button",7),u.Tb("click",function(){return t.toggleFollowing()}),u.Wb(15,"async"),u.Wb(16,"async"),u.Wb(17,"async"),u.Jb(18,"i",8),u.jc(19),u.Wb(20,"async"),u.Wb(21,"async"),u.Lb(),u.Mb(22,"a",9),u.Wb(23,"async"),u.Jb(24,"i",10),u.jc(25," Edit Profile Settings "),u.Lb(),u.Lb(),u.Lb(),u.Lb(),u.Lb(),u.Mb(26,"div",2),u.Mb(27,"div",3),u.Mb(28,"div",4),u.Mb(29,"div",11),u.Mb(30,"ul",12),u.Mb(31,"li",13),u.Mb(32,"a",14),u.Wb(33,"async"),u.jc(34,"My Articles"),u.Lb(),u.Lb(),u.Mb(35,"li",13),u.Mb(36,"a",14),u.Wb(37,"async"),u.jc(38,"Favorited Articles"),u.Lb(),u.Lb(),u.Lb(),u.Lb(),u.Jb(39,"router-outlet"),u.Lb(),u.Lb(),u.Lb(),u.Lb()),2&e){let e=null,i=null,r=null;u.yb(5),u.Zb("src",null==(e=u.Xb(6,14,t.profile$))?null:e.image,u.gc),u.yb(2),u.Zb("hidden",u.Xb(8,16,t.profile$).loading),u.yb(2),u.lc(" ",null==(i=u.Xb(10,18,t.profile$))?null:i.username," "),u.yb(3),u.kc(null==(r=u.Xb(13,20,t.profile$))?null:r.bio),u.yb(2),u.Zb("hidden",u.Xb(15,22,t.isUser$))("ngClass",u.cc(38,N,!u.Xb(16,24,t.profile$).following,u.Xb(17,26,t.profile$).following)),u.yb(5),u.mc(" \xa0 ",u.Xb(20,28,t.profile$).following?"Unfollow":"Follow"," ",u.Xb(21,30,t.profile$).username," "),u.yb(3),u.Zb("routerLink",u.ac(41,T))("hidden",!1===u.Xb(23,32,t.isUser$)),u.yb(10),u.Zb("routerLink",u.bc(42,D,u.Xb(33,34,t.profile$).username))("routerLinkActiveOptions",u.ac(44,K)),u.yb(4),u.Zb("routerLink",u.bc(45,q,u.Xb(37,36,t.profile$).username))("routerLinkActiveOptions",u.ac(47,K))}},directives:[s.j,o.g,o.f,o.i],pipes:[s.b],styles:[""],changeDetection:0}),e})(),B=(()=>{class e{}return e.\u0275mod=u.Gb({type:e}),e.\u0275inj=u.Fb({factory:function(t){return new(t||e)},providers:[W,p,J,Q,_,A],imports:[[s.c,r.b,c.b,o.h.forChild([{path:"",component:z,resolve:{ProfileResolverService:J},canActivate:[n.b],children:[{path:"",component:P,resolve:{ProfileArticlesResolverService:Q}},{path:"favorites",component:P,resolve:{ProfileFavoritesResolverService:_}}]}]),a.j.forFeature("profile",U,{initialState:E}),b.b.forFeature([W])]]}),e})()}}]);
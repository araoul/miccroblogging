(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{l14b:function(t,e,a){"use strict";a.r(e),a.d(e,"SettingsModule",function(){return T});var r=a("gy9y"),s=a("AxuA"),i=a("A47K"),c=a("fXoL");let n=(()=>{class t{constructor(t){this.apiService=t}update(t){return this.apiService.put("/user",{user:t})}}return t.\u0275fac=function(e){return new(e||t)(c.Qb(i.b))},t.\u0275prov=c.Eb({token:t,factory:t.\u0275fac}),t})();var o=a("ofXK"),u=a("tyNb"),b=a("9jGm"),d=a("LRne"),p=a("zp1y"),l=a("lJxs"),h=a("bOdf"),m=a("5+tZ"),g=a("JIr8"),f=a("l7P3");const F=Object(f.n)("[settings] EDIT_SETTINGS");var v=a("EdWO");let y=(()=>{class t{constructor(t,e,a,i){this.actions$=t,this.settingsService=e,this.authFacade=a,this.ngrxFormsFacade=i,this.editSettings=Object(b.c)(()=>this.actions$.pipe(Object(b.d)(F),Object(p.a)(this.ngrxFormsFacade.data$,this.authFacade.user$),Object(l.a)(([t,e,a])=>Object.assign(Object.assign({},a),{image:e.image,username:e.username,bio:e.bio,pass:e.pass,email:e.email})),Object(h.a)(t=>this.settingsService.update(t).pipe(Object(m.a)(t=>[Object(r.e)(),Object(v.b)({to:{path:["profile",t.user.username]}})]),Object(g.a)(t=>Object(d.a)(Object(s.d)({errors:t.error.errors})))))))}}return t.\u0275fac=function(e){return new(e||t)(c.Qb(b.a),c.Qb(n),c.Qb(r.a),c.Qb(s.a))},t.\u0275prov=c.Eb({token:t,factory:t.\u0275fac}),t})();var j=a("3Pt+"),O=a("T7Fx"),x=a("5W4/");const w=[{type:"INPUT",name:"image",placeholder:"URL of profile picture",validator:[]},{type:"INPUT",name:"username",placeholder:"Your Name",validator:[j.h.required]},{type:"TEXTAREA",name:"bio",placeholder:"Short bio about you",validator:[]},{type:"INPUT",name:"email",placeholder:"Email",validator:[j.h.required]},{type:"INPUT",name:"password",placeholder:"New Password",validator:[j.h.required],attrs:{type:"password"}}];let $=(()=>{class t{constructor(t,e,a,r){this.store=t,this.router=e,this.authFacade=a,this.ngrxFormsFacade=r}ngOnInit(){this.ngrxFormsFacade.setStructure(w),this.authFacade.user$.subscribe(t=>this.ngrxFormsFacade.setData(t)),this.data$=this.ngrxFormsFacade.data$,this.structure$=this.ngrxFormsFacade.structure$}updateForm(t){this.ngrxFormsFacade.updateData(t)}submit(){this.store.dispatch(F())}logout(){this.authFacade.logout()}}return t.\u0275fac=function(e){return new(e||t)(c.Ib(f.h),c.Ib(u.e),c.Ib(r.a),c.Ib(s.a))},t.\u0275cmp=c.Cb({type:t,selectors:[["app-settings"]],decls:14,vars:2,consts:[[1,"settings-page"],[1,"container","page"],[1,"row"],[1,"col-md-6","offset-md-3","col-xs-12"],[1,"text-xs-center"],[3,"data$","structure$","updateForm"],[1,"edit-button-container"],["type","submit",1,"btn","btn-lg","btn-primary","pull-xs-right",3,"click"],[1,"btn","btn-outline-danger",3,"click"]],template:function(t,e){1&t&&(c.Mb(0,"div",0),c.Mb(1,"div",1),c.Mb(2,"div",2),c.Mb(3,"div",3),c.Mb(4,"h1",4),c.jc(5,"Your Settings"),c.Lb(),c.Jb(6,"app-list-errors"),c.Mb(7,"app-dynamic-form",5),c.Tb("updateForm",function(t){return e.updateForm(t)}),c.Lb(),c.Mb(8,"div",6),c.Mb(9,"button",7),c.Tb("click",function(){return e.submit()}),c.jc(10," Update Settings "),c.Lb(),c.Lb(),c.Jb(11,"hr"),c.Mb(12,"button",8),c.Tb("click",function(){return e.logout()}),c.jc(13," Or click here to logout. "),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb()),2&t&&(c.yb(7),c.Zb("data$",e.data$)("structure$",e.structure$))},directives:[O.a,x.a],styles:[".edit-button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"],changeDetection:0}),t})(),T=(()=>{class t{}return t.\u0275mod=c.Gb({type:t}),t.\u0275inj=c.Fb({factory:function(e){return new(e||t)},providers:[y,n],imports:[[o.c,s.b,u.h.forChild([{path:"",pathMatch:"full",component:$,canActivate:[r.b]}]),b.b.forFeature([y])]]}),t})()}}]);